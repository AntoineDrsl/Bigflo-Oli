{% extends 'base.html.twig' %}

{% block title %}{{ article.title | capitalize }}{% endblock %}

{% block stylesheets %}<link rel="stylesheet" href=" {{ asset('assets/css/articles.css') }}">{% endblock%}

{% block body %}
<div class="container">

    <h1 class="mt-5 text-center">{{ article.title | capitalize }}</h1>
    <h5 class="mb-5 text-center"><em>Le {{ article.createdAt.date | date('d/m/Y') }}</em></h5>

    <div id="articleContainer">
        <div id="articleImgContainer" class="text-center">
            <img src="{{ asset('assets/uploads/articles/' ~ article.image) }}" alt="{{ article.title }}">
        </div>  
        <div id="articleTextContainer">
            <div>{{ article.content | raw }}</div>
        </div>
    </div>

    <h2 class="mt-5 mb-3">Commentaires</h2>

    {% if is_granted('ROLE_USER') %}
        {{ form(commentForm) }}
    {% else %}
        <div class="alert alert-dark" role="alert">
            <a href="{{ path('login') }}" class="alert-link">Connectez vous</a> pour poster un commentaire !
        </div>
    {% endif %}

    {% if comments.count() == 0 %}
        <p id="noComment">Il n'y a aucun commentaire pour le moment :(</p>
    {% else %}
        {% for comment in comments %}
            <div class="commentContainer">
                <h6><em>De {{ comment.user.pseudo }} le {{ comment.createdAt.date | date('d/m/Y') }}</em></h6>
                <p class="comment">{{comment.content}}</p> 
            </div>
        {% endfor %}
    {% endif %}

</div>
{% endblock %}